<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Department Feedback / அவசர சிகிச்சை பிரிவு கருத்து</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Tamil:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Added overflow: hidden to body to prevent accidental scrollbars */
            overflow: hidden; 
        }
        .lang-ta {
            font-family: 'Noto Sans Tamil', sans-serif;
        }
        .kiosk-container {
            width: 1080px;
            height: 1920px;
            margin: 0 auto;
            display: flex; /* Using flexbox to manage layout */
            flex-direction: column; /* Stack children vertically */
        }
        .kiosk-header {
            flex-shrink: 0; /* Prevent header from shrinking */
        }
        .kiosk-main {
            flex-grow: 1; /* Allow main content to fill remaining space */
            overflow-y: auto; /* Allow scrolling ONLY if absolutely necessary */
        }
        /* --- Compact Styling Adjustments --- */
        .star-rating input[type="radio"] {
            display: none;
        }
        .star-rating label {
            font-size: 2.75rem; /* Reduced from 3.5rem */
            color: #d1d5db;
            cursor: pointer;
            transition: color 0.2s;
        }
        .star-rating input[type="radio"]:checked ~ label,
        .star-rating label:hover,
        .star-rating label:hover ~ label {
            color: #f59e0b;
        }
        .emoji-rating input[type="radio"] {
            display: none;
        }
        .emoji-rating label {
            font-size: 4rem; /* Reduced from 5rem */
            cursor: pointer;
            transition: transform 0.2s;
            display: inline-block;
        }
        .emoji-rating input[type="radio"]:checked + label {
            transform: scale(1.2);
            filter: grayscale(0%);
        }
        .emoji-rating label {
             filter: grayscale(80%);
        }
        .form-section {
            padding: 1.25rem; /* Reduced from 2rem */
            margin-bottom: 0.75rem; /* Reduced from 1.5rem */
            border-radius: 1.5rem;
        }
        .question-text {
            font-size: 1.75rem; /* Reduced from 2rem */
            font-weight: 500;
            margin-bottom: 1rem; /* Reduced from 1.5rem */
            line-height: 1.3;
        }
        .btn-submit {
            font-size: 2rem; /* Reduced from 2.25rem */
            padding: 1rem 2rem; /* Reduced padding */
            transition: background-color 0.3s, transform 0.2s;
        }
        .btn-submit:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        textarea, input[type="tel"] {
            font-size: 1.25rem; /* Reduced from 1.5rem */
            padding: 0.75rem; /* Reduced padding */
        }
        .lang-btn {
            font-size: 1rem; /* Reduced from 1.25rem */
            padding: 0.5rem 1rem; /* Reduced padding */
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }
        .lang-btn.active {
            background-color: white;
            color: #2563eb;
        }
        .lang-btn.inactive {
            background-color: transparent;
            color: white;
            border: 2px solid white;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center">
    <div class="kiosk-container bg-white shadow-2xl">
        
        <div id="english-view" class="flex flex-col h-full">
            <header class="kiosk-header bg-blue-600 text-white p-6 relative"> <div class="text-center">
                    <h1 class="text-3xl font-bold leading-tight"> <span class="font-sans">Feedback Portal</span><br><span class="lang-ta">கருத்து பகிரும் தளம்</span>
                    </h1>
                    <p class="text-xl mt-2 font-semibold leading-tight"> <span class="font-sans">Emergency Medical Services</span><br><span class="lang-ta">அவசர மருத்துவ சேவைகள்</span>
                    </p>
                    <p class="text-base mt-2"> <span class="font-sans">Your feedback helps us improve.</span><br><span class="lang-ta">உங்கள் கருத்து எங்களை மேம்படுத்த உதவுகிறது.</span>
                    </p>
                </div>
                <div class="absolute top-6 right-6 flex gap-2"> <button id="btn-en-active" class="lang-btn active">English</button>
                    <button id="btn-ta-inactive" class="lang-btn inactive">தமிழ்</button>
                </div>
            </header>
            <main class="kiosk-main p-6"> <form id="feedbackFormEn">
                    <div class="form-section bg-slate-50">
                        <p class="question-text">1. How would you rate your waiting time?</p>
                        <div class="star-rating flex flex-row-reverse justify-center gap-2">
                            <input type="radio" id="en-wait-5" name="waiting_time" value="5"><label for="en-wait-5">★</label>
                            <input type="radio" id="en-wait-4" name="waiting_time" value="4"><label for="en-wait-4">★</label>
                            <input type="radio" id="en-wait-3" name="waiting_time" value="3"><label for="en-wait-3">★</label>
                            <input type="radio" id="en-wait-2" name="waiting_time" value="2"><label for="en-wait-2">★</label>
                            <input type="radio" id="en-wait-1" name="waiting_time" value="1" required><label for="en-wait-1">★</label>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">2. How was the behavior of our staff?</p>
                        <div class="star-rating flex flex-row-reverse justify-center gap-2">
                            <input type="radio" id="en-staff-5" name="staff_behavior" value="5"><label for="en-staff-5">★</label>
                            <input type="radio" id="en-staff-4" name="staff_behavior" value="4"><label for="en-staff-4">★</label>
                            <input type="radio" id="en-staff-3" name="staff_behavior" value="3"><label for="en-staff-3">★</label>
                            <input type="radio" id="en-staff-2" name="staff_behavior" value="2"><label for="en-staff-2">★</label>
                            <input type="radio" id="en-staff-1" name="staff_behavior" value="1" required><label for="en-staff-1">★</label>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">3. How would you rate the cleanliness of the premises?</p>
                        <div class="star-rating flex flex-row-reverse justify-center gap-2">
                            <input type="radio" id="en-clean-5" name="cleanliness" value="5"><label for="en-clean-5">★</label>
                            <input type="radio" id="en-clean-4" name="cleanliness" value="4"><label for="en-clean-4">★</label>
                            <input type="radio" id="en-clean-3" name="cleanliness" value="3"><label for="en-clean-3">★</label>
                            <input type="radio" id="en-clean-2" name="cleanliness" value="2"><label for="en-clean-2">★</label>
                            <input type="radio" id="en-clean-1" name="cleanliness" value="1" required><label for="en-clean-1">★</label>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">4. How would you rate your overall experience?</p>
                        <div class="emoji-rating flex justify-around items-center">
                            <div><input type="radio" id="en-emoji-1" name="overall_experience" value="1" required><label for="en-emoji-1">😞</label></div>
                            <div><input type="radio" id="en-emoji-2" name="overall_experience" value="2"><label for="en-emoji-2">😐</label></div>
                            <div><input type="radio" id="en-emoji-3" name="overall_experience" value="3"><label for="en-emoji-3">🙂</label></div>
                            <div><input type="radio" id="en-emoji-4" name="overall_experience" value="4"><label for="en-emoji-4">😊</label></div>
                            <div><input type="radio" id="en-emoji-5" name="overall_experience" value="5"><label for="en-emoji-5">🤩</label></div>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">5. Any other comments? (Optional)</p>
                        <textarea name="comments" rows="3" class="w-full p-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300" placeholder="Type your comments here..."></textarea> </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">6. Phone number (Optional)</p>
                        <input type="tel" name="phone_number" class="w-full p-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300" placeholder="Enter your phone number...">
                    </div>
                    <div class="mt-4 text-center"> <button type="submit" id="submitBtnEn" class="btn-submit bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full shadow-lg transform hover:scale-105">
                            Submit Feedback
                        </button>
                    </div>
                </form>
            </main>
        </div>

        <div id="tamil-view" class="hidden lang-ta flex-col h-full">
            <header class="kiosk-header bg-blue-600 text-white p-6 relative">
                <div class="text-center">
                    <h1 class="text-3xl font-bold leading-tight">
                        <span class="font-sans">Feedback Portal</span><br><span class="lang-ta">கருத்து பகிரும் தளம்</span>
                    </h1>
                    <p class="text-xl mt-2 font-semibold leading-tight">
                        <span class="font-sans">Emergency Medical Services</span><br><span class="lang-ta">அவசர மருத்துவ சேவைகள்</span>
                    </p>
                    <p class="text-base mt-2">
                        <span class="font-sans">Your feedback helps us improve.</span><br><span class="lang-ta">உங்கள் கருத்து எங்களை மேம்படுத்த உதவுகிறது.</span>
                    </p>
                </div>
                 <div class="absolute top-6 right-6 flex gap-2">
                    <button id="btn-en-inactive" class="lang-btn inactive">English</button>
                    <button id="btn-ta-active" class="lang-btn active">தமிழ்</button>
                </div>
            </header>
             <main class="kiosk-main p-6">
                <form id="feedbackFormTa">
                    <div class="form-section bg-slate-50">
                        <p class="question-text">1. உங்கள் காத்திருப்பு நேரத்தை நீங்கள் எப்படி மதிப்பிடுவீர்கள்?</p>
                        <div class="star-rating flex flex-row-reverse justify-center gap-2">
                            <input type="radio" id="ta-wait-5" name="waiting_time" value="5"><label for="ta-wait-5">★</label>
                            <input type="radio" id="ta-wait-4" name="waiting_time" value="4"><label for="ta-wait-4">★</label>
                            <input type="radio" id="ta-wait-3" name="waiting_time" value="3"><label for="ta-wait-3">★</label>
                            <input type="radio" id="ta-wait-2" name="waiting_time" value="2"><label for="ta-wait-2">★</label>
                            <input type="radio" id="ta-wait-1" name="waiting_time" value="1" required><label for="ta-wait-1">★</label>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">2. எங்கள் ஊழியர்களின் நடத்தை எப்படி இருந்தது?</p>
                        <div class="star-rating flex flex-row-reverse justify-center gap-2">
                            <input type="radio" id="ta-staff-5" name="staff_behavior" value="5"><label for="ta-staff-5">★</label>
                            <input type="radio" id="ta-staff-4" name="staff_behavior" value="4"><label for="ta-staff-4">★</label>
                            <input type="radio" id="ta-staff-3" name="staff_behavior" value="3"><label for="ta-staff-3">★</label>
                            <input type="radio" id="ta-staff-2" name="staff_behavior" value="2"><label for="ta-staff-2">★</label>
                            <input type="radio" id="ta-staff-1" name="staff_behavior" value="1" required><label for="ta-staff-1">★</label>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">3. வளாகத்தின் தூய்மையை நீங்கள் எப்படி மதிப்பிடுவீர்கள்?</p>
                         <div class="star-rating flex flex-row-reverse justify-center gap-2">
                            <input type="radio" id="ta-clean-5" name="cleanliness" value="5"><label for="ta-clean-5">★</label>
                            <input type="radio" id="ta-clean-4" name="cleanliness" value="4"><label for="ta-clean-4">★</label>
                            <input type="radio" id="ta-clean-3" name="cleanliness" value="3"><label for="ta-clean-3">★</label>
                            <input type="radio" id="ta-clean-2" name="cleanliness" value="2"><label for="ta-clean-2">★</label>
                            <input type="radio" id="ta-clean-1" name="cleanliness" value="1" required><label for="ta-clean-1">★</label>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">4. உங்கள் ஒட்டுமொத்த அனுபவத்தை எப்படி மதிப்பிடுவீர்கள்?</p>
                        <div class="emoji-rating flex justify-around items-center">
                            <div><input type="radio" id="ta-emoji-1" name="overall_experience" value="1" required><label for="ta-emoji-1">😞</label></div>
                            <div><input type="radio" id="ta-emoji-2" name="overall_experience" value="2"><label for="ta-emoji-2">😐</label></div>
                            <div><input type="radio" id="ta-emoji-3" name="overall_experience" value="3"><label for="ta-emoji-3">🙂</label></div>
                            <div><input type="radio" id="ta-emoji-4" name="overall_experience" value="4"><label for="ta-emoji-4">😊</label></div>
                            <div><input type="radio" id="ta-emoji-5" name="overall_experience" value="5"><label for="ta-emoji-5">🤩</label></div>
                        </div>
                    </div>
                    <div class="form-section bg-slate-50">
                        <p class="question-text">5. வேறு கருத்துகள், பரிந்துரைகள்? (விருப்பத்திற்குரியது)</p>
                        <textarea name="comments" rows="3" class="w-full p-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300" placeholder="உங்கள் கருத்துகளை இங்கே உள்ளிடவும்..."></textarea>
                    </div>
                     <div class="form-section bg-slate-50">
                        <p class="question-text">6. உங்கள் தொலைபேசி எண் (விருப்பத்திற்குரியது)</p>
                        <input type="tel" name="phone_number" class="w-full p-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300" placeholder="உங்கள் தொலைபேசி எண்ணை உள்ளிடவும்...">
                    </div>
                    <div class="mt-4 text-center">
                        <button type="submit" id="submitBtnTa" class="btn-submit bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full shadow-lg transform hover:scale-105">
                            கருத்தை சமர்ப்பிக்கவும்
                        </button>
                    </div>
                </form>
            </main>
        </div>

        <div id="thank-you-view" class="hidden h-full flex-col items-center justify-center text-center p-12 bg-blue-600 text-white">
            <div id="thank-you-content">
                </div>
        </div>
    </div>

    <script>
        // --- IMPORTANT: THE SCRIPT URL IS NOW SET ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxzV4mVuocmtQdrNKoqMCnIm7PfRQOGTFhgumJOuPDNpx7oX4DHOh9LrMnp6sPPiGpjVg/exec"; 

        // --- DOM Elements ---
        const englishView = document.getElementById('english-view');
        const tamilView = document.getElementById('tamil-view');
        const thankYouView = document.getElementById('thank-you-view');
        const thankYouContent = document.getElementById('thank-you-content');
        
        const feedbackFormEn = document.getElementById('feedbackFormEn');
        const feedbackFormTa = document.getElementById('feedbackFormTa');

        const submitBtnEn = document.getElementById('submitBtnEn');
        const submitBtnTa = document.getElementById('submitBtnTa');
        
        const langButtons = [
            document.getElementById('btn-en-active'),
            document.getElementById('btn-ta-inactive'),
            document.getElementById('btn-en-inactive'),
            document.getElementById('btn-ta-active')
        ];

        // --- Functions ---
        
        function setLanguage(lang) {
            if (lang === 'ta') {
                englishView.classList.add('hidden');
                englishView.classList.remove('flex');
                tamilView.classList.remove('hidden');
                tamilView.classList.add('flex');
            } else {
                tamilView.classList.add('hidden');
                tamilView.classList.remove('flex');
                englishView.classList.remove('hidden');
                englishView.classList.add('flex');
            }
        }
        
        function handleFormSubmit(event, lang) {
            event.preventDefault();
            
            const form = lang === 'en' ? feedbackFormEn : feedbackFormTa;
            const submitBtn = lang === 'en' ? submitBtnEn : submitBtnTa;
            const originalBtnText = submitBtn.textContent;

            submitBtn.disabled = true;
            submitBtn.textContent = lang === 'en' ? 'Submitting...' : 'சமர்ப்பிக்கிறது...';

            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            data.language = lang;

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(res => {
                showThankYouMessage(lang);
            })
            .catch(error => {
                console.error('Error!', error.message);
                showThankYouMessage(lang);
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = originalBtnText;
            });
        }

        function showThankYouMessage(lang) {
             const thankYouHTML = lang === 'en' 
                ? `<div class="text-7xl mb-8">✓</div>
                   <h2 class="text-6xl font-bold mb-6">Thank You!</h2>
                   <p class="text-3xl">Your feedback has been submitted successfully.</p>
                   <p class="text-2xl mt-12">This screen will reset shortly.</p>`
                : `<div class="lang-ta">
                     <div class="text-7xl mb-8">✓</div>
                     <h2 class="text-6xl font-bold mb-6">நன்றி!</h2>
                     <p class="text-3xl">உங்கள் கருத்து வெற்றிகரமாக சமர்ப்பிக்கப்பட்டது.</p>
                     <p class="text-2xl mt-12">இந்தத் திரை விரைவில் மீட்டமைக்கப்படும்.</p>
                   </div>`;

            thankYouContent.innerHTML = thankYouHTML;
            englishView.classList.add('hidden');
            tamilView.classList.add('hidden');
            thankYouView.classList.add('flex');
            thankYouView.classList.remove('hidden');


            setTimeout(() => {
                feedbackFormEn.reset();
                feedbackFormTa.reset();
                thankYouView.classList.remove('flex');
                thankYouView.classList.add('hidden');
                setLanguage('en'); 
            }, 5000);
        }

        // --- Event Listeners ---
        langButtons.forEach(button => {
            button.addEventListener('click', () => {
                const lang = button.id.includes('ta') ? 'ta' : 'en';
                setLanguage(lang);
            });
        });

        feedbackFormEn.addEventListener('submit', (e) => handleFormSubmit(e, 'en'));
        feedbackFormTa.addEventListener('submit', (e) => handleFormSubmit(e, 'ta'));

        // --- Initial State ---
        setLanguage('en');
    </script></body>
</html>
